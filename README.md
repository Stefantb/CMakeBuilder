# CMakeBuilder
Configure and build a CMake project right from within Sublime Text 3.

## Instruction Manual
Have a `.sublime-project` file in your project folder. In that file, create a
new dictionary called `cmake`, as in the following screenshot.

![The CMake dictionary item](https://raw.githubusercontent.com/rwols/CMakeBuilder/screenshots/screenshots/1.png "The CMake dictionary inside a sublime project file")

The `cmake` dictionary accepts the following keys:

###build\_folder
The folder where to build the project. If this key is not present in the `cmake`
dictionary, then a temporary folder will be created, and the value of
`build_folder` will be set to that temporary folder. You can always browse the
build folder by running the command

    CMakeBuilder: Browse Build Folder ...

###root\_folder (optional)
The folder where the root CMakeLists.txt file resides. If this is not specified,
it is assumed that the root folder is the same as the project folder. This
setting can be useful if your project is "embedded" into a larger project.

###command\_line\_overrides (optional)
A dictionary of key-value pairs that are passed to the cmake invocation as `-D`
options.

###generator (optional)
The generator, passed to the cmake invocation via `-G`. Currently, only
`Unix Makefiles` and `Ninja` are supported.

###filter\_targets (optional)
A list of strings specifying which targets to filter from the list of all
targets that may be built. If you have a lot of targets defined, this may be
helpful.

Once the sublime project file is populated with the desired cmake settings, you
can invoke the command

    CMakeBuilder: Configure

from the Command Palette. This will configure the project in the specified
`builder_folder`, and if specified, with the CMakeLists.txt file in
`root_folder`, otherwise the current project path is assumed to have a
CMakeLists.txt file.

![The CMake dictionary item](https://raw.githubusercontent.com/rwols/CMakeBuilder/screenshots/screenshots/2.png "Running the Configure step")

Once the project is successfully configured, you can optionally fill your
sublime project file with a custom build system derived from the targets
generated by cmake. To do this, simply run the command

    CMakeBuilder: Write Build Targets to Sublime Project File

from the Command Palette.

![The CMake dictionary item](https://raw.githubusercontent.com/rwols/CMakeBuilder/screenshots/screenshots/5.png "Configuring the custom build system")

![The CMake dictionary item](https://raw.githubusercontent.com/rwols/CMakeBuilder/screenshots/screenshots/7.png "The custom build system has been configured")

Now you can enjoy building the correct targets right from Sublime Text 3.

![The CMake dictionary item](https://raw.githubusercontent.com/rwols/CMakeBuilder/screenshots/screenshots/8.png "Building your defined targets with multithreaded make in Sublime Text 3")

##Extra Goodies

###Clearing the cache
To force CMake files re-generation run

    CMakeBuilder: Clear Cache

and then run

    CMakeBuilder: Configure

or you can do both in one go with

    CMakeBuilder: Clear Cache and Configure

but be aware that this does not ask for confirmation for the deletion of the
cache files.

###Diagnostics/Help
If you get stuck and don't know what to do, try running

    CMakeBuilder: Diagnose (What Should I Do?)

###Running unit tests with CTest
If you have unit tests configured with the [add_test](https://cmake.org/cmake/help/latest/command/add_test.html) function of CMake, then
you can run those with the command

    CMakeBuilder: Run CTest

By default, this command will not output what your unit test outputs, unless the
test fails. This gives you a clean overview of what runs correctly and what is
failing and why.

###Syntax highlighting for CMakeCache.txt and the output panel
There is syntax highlighting for the CMakeCache.txt file and for the configure
step. You can press F4 to go to the error message in the configuration step.

##List of valid variable substitutions
This is a reference list for the valid variable substitutions for your
`.sublime-project` file.

* packages
* platform
* file
* file\_path
* file\_name
* file\_base\_name
* file\_extension
* folder
* project
* project\_path
* project\_name
* project\_base\_name
* project\_extension
